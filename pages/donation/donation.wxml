<!--pages/donation/donation.wxml-->
<navBar title="友情赞助" />
<layout>
  <view class="donation-page">
    <!-- 感谢语 -->
    <view class="header-section">
      <text class="header-title">感谢您的支持</text>
      <text class="header-desc">您的支持是我们前进的动力</text>
    </view>

    <!-- 固定金额选项 -->
    <view class="amount-section">
      <view class="fixed-amounts">
        <view 
          class="amount-card {{selectedAmountId === item.id && !isCustom ? 'amount-card-selected' : ''}}"
          wx:for="{{fixedAmounts}}"
          wx:key="id"
          bindtap="onSelectAmount"
          data-id="{{item.id}}">
          <text class="iconfont {{item.icon}} amount-icon"></text>
          <text class="amount-name">{{item.name}}</text>
          <text class="amount-price">¥{{item.amount}}</text>
        </view>
      </view>
    </view>

    <!-- 自定义金额 -->
    <view class="custom-section">
      <view class="custom-header" bindtap="onToggleCustom">
        <text class="custom-title">自定义金额</text>
        <text class="iconfont {{isCustom ? 'icon-arrow-down' : 'icon-arrow-r'}}"></text>
      </view>
      <view class="custom-input-wrapper" wx:if="{{isCustom}}">
        <text class="currency-symbol">¥</text>
        <input 
          class="custom-input"
          type="digit"
          placeholder="1-500"
          value="{{customAmount}}"
          bindinput="onCustomAmountInput"
          maxlength="6" />
        <text class="input-hint">元</text>
      </view>
    </view>

    <!-- 留言 -->
    <view class="message-section">
      <text class="section-title">留言（可选）</text>
      <textarea 
        class="message-input"
        placeholder="说点什么吧..."
        value="{{message}}"
        bindinput="onMessageInput"
        maxlength="200"
        show-confirm-bar="{{false}}" />
      <text class="message-count">{{message.length}}/200</text>
    </view>

    <!-- 匿名选项 -->
    <view class="anonymous-section">
      <view class="anonymous-row" bindtap="onToggleAnonymous">
        <view class="anonymous-info">
          <text class="anonymous-title">匿名赞助</text>
          <text class="anonymous-desc">在赞助墙中显示为"匿名用户"</text>
        </view>
        <view class="switch-wrapper">
          <switch checked="{{isAnonymous}}" color="#007aff" />
        </view>
      </view>
    </view>

    <!-- 快捷入口 -->
    <view class="quick-links">
      <view class="quick-link" bindtap="onViewDonationList">
        <text class="iconfont icon-users"></text>
        <text class="quick-link-text">赞助墙</text>
      </view>
      <view class="quick-link" bindtap="onViewMyDonations">
        <text class="iconfont icon-order"></text>
        <text class="quick-link-text">我的记录</text>
      </view>
    </view>
    
    <!-- 底部说明 -->
    <view class="footer-section">
      <text class="footer-text">赞助用于服务器维护和功能优化</text>
      <!-- <text class="footer-text">赞助记录仅用于感谢，不会公开个人信息</text> -->
    </view>

    <!-- 提交按钮 -->
    <view class="submit-section">
      <button 
        class="submit-btn {{isSubmitting ? 'submit-btn-disabled' : ''}}"
        bindtap="onSubmit"
        disabled="{{isSubmitting}}">
        {{isSubmitting ? '处理中...' : '确认赞助'}}
      </button>
    </view>

  </view>
</layout>

