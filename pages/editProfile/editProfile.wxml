<!--pages/editProfile/editProfile.wxml-->
<navBar title="个人信息" />
<layout class="container">
  <view class="profile-form">
    <!-- 我的头像 -->
    <view class="form-item" bindtap="onChooseAvatar">
      <text class="label">我的头像</text>
      <view class="value-container">
        <image src="{{userInfo.avatarUrl || '/images/defaultAvatar.png'}}" class="avatar"></image>
        <text class="iconfont icon-arrow-r arrow"></text>
      </view>
    </view>

    <!-- 我的昵称 -->
    <view class="form-item">
      <text class="label">我的昵称</text>
      <view class="value-container">
        <input class="input-value" placeholder="请输入昵称" value="{{userInfo.nickName}}" bindinput="onNicknameInput" />
      </view>
    </view>

    <!-- 手机号 -->
    <button class="form-item phone-item" open-type="getPhoneNumber" bindgetphonenumber="onGetPhoneNumber">
      <text class="label">手机号</text>
      <view class="value-container">
        <text class="value">{{userInfo.phoneNumber || '未绑定'}}</text>
        <text class="iconfont icon-arrow-r arrow"></text>
      </view>
    </button>

    <!-- 性别 -->
    <view class="form-item" bindtap="onChooseGender">
      <text class="label">性别</text>
      <view class="value-container">
        <text class="value">{{genderText}}</text>
        <text class="iconfont icon-arrow-r arrow"></text>
      </view>
    </view>

    <!-- 个人介绍 -->
    <view class="form-item intro-item">
      <text class="label">个人介绍</text>
      <view class="value-container">
        <textarea class="intro-textarea" placeholder="请输入个人介绍" value="{{userInfo.intro}}" bindinput="onIntroInput" maxlength="200"></textarea>
      </view>
    </view>
  </view>

  <!-- 保存按钮 -->
  <view class="save-container">
    <button class="save-btn" bindtap="onSave">保存修改</button>
  </view>

  <!-- 性别选择弹窗 -->
  <view class="gender-modal" wx:if="{{showGenderModal}}" bindtap="onCloseGenderModal">
    <view class="modal-content" catchtap="stopPropagation">
      <view class="modal-header">
        <text class="modal-title">选择性别</text>
      </view>
      <view class="gender-options">
        <view class="gender-option {{userInfo.gender === 1 ? 'selected' : ''}}" bindtap="onSelectGender" data-gender="1">
          <text>男</text>
        </view>
        <view class="gender-option {{userInfo.gender === 2 ? 'selected' : ''}}" bindtap="onSelectGender" data-gender="2">
          <text>女</text>
        </view>
      </view>
    </view>
  </view>
</layout> 