<!--pages/profile/profile.wxml-->
<navBar />
<layout class="container">
  <!-- 用户信息区域 -->
  <view class="user-section" bindtap="onEditProfile">
    <view class="user-info">
      <view class="user-avatar">
        <image src="{{userInfo.avatar}}" class="avatar-img"></image>
      </view>
      <view class="user-details">
        <text class="username">{{userInfo.nickname}}</text>
        <view class="user-desc-row">
          <text class="user-desc">点击编辑个人资料</text>
          <view class="role-tag" bindtap="onSwitchRole" catchtap="onSwitchRole">
            <text class="role-text">{{roleNames[userRole]}}</text>
            <text class="switch-text">切换</text>
          </view>
        </view>
      </view>
    </view>
    <text class="iconfont icon-arrow-r arrow-icon"></text>
  </view>

  <!-- 功能菜单 -->
  <view class="menu-section">
    <view class="menu-item" bindtap="onMyCoachesOrStudents">
      <view class="menu-content">
        <text class="iconfont {{userRole === 'student' ? 'icon-jianshenjiaolian' : 'icon-user'}} menu-icon"></text>
        <text class="menu-text">{{userRole === 'student' ? '我的教练' : '我的学员'}}</text>
      </view>
      <text class="iconfont icon-arrow-r arrow-icon"></text>
    </view>
    
    <view class="menu-item" bindtap="onMyCourses">
      <view class="menu-content">
        <text class="iconfont icon-kechengbiao menu-icon"></text>
        <text class="menu-text">我的课程</text>
      </view>
      <text class="iconfont icon-arrow-r arrow-icon"></text>
    </view>

    <!-- 教练专用：我的可约时间 -->
    <view class="menu-item" bindtap="onMyAvailableTime" wx:if="{{userRole === 'coach'}}">
      <view class="menu-content">
        <text class="iconfont icon-kechengbiao menu-icon"></text>
        <text class="menu-text">我的可约时间</text>
      </view>
      <text class="iconfont icon-arrow-r arrow-icon"></text>
    </view>
  </view>
  <!-- 退出登录 -->
  <view class="logout-btn" bindtap="onLogout">
    <text class="logout-text">退出登录</text>
  </view>
</layout>