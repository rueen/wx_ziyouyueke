<!--pages/tools-rm/rm.wxml-->
<navBar title="1RM计算器" />
<layout>
  <view class="rm-container">
    <!-- RM计算器 -->
    <view class="input-section">
      <view class="section-title">RM计算器</view>
      <view class="input-item">
        <text class="label">训练重量</text>
        <view class="input-wrapper">
          <input type="digit" class="input" placeholder="请输入重量" value="{{weight}}" bindinput="onWeightInput" />
          <text class="unit">公斤</text>
        </view>
      </view>

      <view class="input-item">
        <text class="label">完成次数</text>
        <view class="input-wrapper">
          <input type="number" class="input" placeholder="请输入次数" value="{{reps}}" bindinput="onRepsInput" />
          <text class="unit">次</text>
        </view>
      </view>

      <!-- 计算按钮 -->
      <button class="calculate-btn" bindtap="onCalculate">计算 1RM</button>
    </view>

    <!-- 结果展示 -->
    <view class="result-section" wx:if="{{oneRM}}">
      <view class="result-card">
        <view class="rm-value">
          <text class="label-text">您的 1RM 约为：</text>
          <text class="value-text">{{oneRM}}</text>
          <text class="unit-text">公斤</text>
        </view>
        <view class="formula-note">
          <text class="note-text">使用 Brzycki 公式计算</text>
        </view>
      </view>
    </view>

    <!-- 训练重量推荐 -->
    <view class="recommendation-section" wx:if="{{oneRM}}">
      <view class="section-title">训练重量推荐</view>
      <view class="table-wrapper">
        <view class="table-row table-header">
          <text class="table-cell">%1RM</text>
          <text class="table-cell">重量(kg)</text>
          <text class="table-cell">推荐次数</text>
        </view>
        <view class="table-row" wx:for="{{recommendations}}" wx:key="percent">
          <text class="table-cell">{{item.percent}}%</text>
          <text class="table-cell">{{item.weight}}</text>
          <text class="table-cell">{{item.reps}}</text>
        </view>
      </view>
      <view class="source-note">
        <text class="note-text">注：此表格为理论参考值，实际训练中个体差异较大，建议根据自身情况调整</text>
      </view>
    </view>

    <!-- 1RM测试参考 -->
    <view class="standard-section">
      <view class="standard-title">1RM 测试参考</view>
      <view class="test-content">
        <view class="test-step">
          <view class="step-title">热身阶段</view>
          <text class="step-desc">1. 按预估 1RM 的 40% ~ 60% 完成 5 ~ 10 次热身，休息 1 分钟</text>
          <text class="step-desc">2. 完成 3 ~ 5 次热身重量，休息 2 分钟</text>
          <text class="step-desc">3. 完成 2 ~ 3 次接近最大负荷重量，休息 2 ~ 4 分钟</text>
        </view>
        
        <view class="test-step">
          <view class="step-title">测试阶段</view>
          <text class="step-desc">4. 尝试 1RM，根据结果调整重量后再次尝试</text>
          <text class="step-desc">5. 理想情况下应在 3 次内测得准确 1RM</text>
          <text class="step-desc">6. 记录最后一次成功举起的最大重量</text>
        </view>

        <view class="test-step">
          <view class="step-title">重量递增标准</view>
          <view class="weight-guide">
            <view class="guide-row">
              <text class="guide-label">上肢动作</text>
              <text class="guide-value">每次递增 2.5 ~ 5 kg 或 2.5% ~ 10%</text>
            </view>
            <view class="guide-row">
              <text class="guide-label">下肢动作</text>
              <text class="guide-value">每次递增 7 ~ 9 kg 或 5% ~ 20%</text>
            </view>
          </view>
        </view>
      </view>
      <view class="source-note">
        <text class="note-text">注：测试过程中应确保动作标准，避免受伤风险</text>
      </view>
    </view>

  </view>
</layout>

