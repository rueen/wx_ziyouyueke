<!--pages/bindCoach/bindCoach.wxml-->
<navBar title="绑定教练" showBack="{{true}}" bindback="onGoBack" />
<layout>
  
  <!-- 加载状态 -->
  <view class="loading-container" wx:if="{{isLoading}}">
    <view class="loading-content">
      <text class="loading-text">加载教练信息中...</text>
    </view>
  </view>

  <!-- 教练信息展示 -->
  <view class="coach-info-container" wx:else>
    <image src="{{coachData.poster_image || coachData.avatar_url}}" mode="widthFix" class="poster_image"/>
    <view class="poster-mask">
      <image class="poster-mask-image" src="https://ziyouyueke.oss-cn-hangzhou.aliyuncs.com/poster/poster-mask.png" mode="widthFix"/>
      <view class="nickname">
        <text class="nickname-text">{{coachData.nickname}}</text>
      </view>
    </view>
    <view class="content">
      <view class="motto" wx:if="{{coachData.motto}}">
        <view class="motto-inner">
          <text class="motto-text">{{coachData.motto}}</text>
        </view>
      </view>
      <block wx:if="{{coachData.certification && coachData.certification.length}}">
        <view class="title">专业认证</view>
        <view class="intro">
          <text wx:for="{{coachData.certification}}" wx:key="*this" class="intro-text">{{item}}</text>
        </view>
      </block>
      
      <block wx:if="{{coachData.intro && coachData.intro.length}}">
        <view class="title">教学擅长</view>
        <view class="intro">
          <text wx:for="{{coachData.intro}}" wx:key="*this" class="intro-text">{{item}}</text>
        </view>
      </block>

      <!-- 课程分类 -->
      <block wx:if="{{coachData.course_categories && coachData.course_categories.length}}">
        <view class="title">课程分类</view>
        <view class="categories" wx:for="{{coachData.course_categories}}" wx:key="id">
          <text class="categories-name">{{item.name}}:</text>
          <text class="categories-desc">{{item.desc}}</text>
        </view>
      </block>

      <!-- 绑定提示 -->
      <view class="bind-tips">
        <view class="tips-content">
          <text class="tips-title">绑定说明</text>
          <text class="tips-desc">绑定后您可以预约该教练的课程，享受专业的教学服务</text>
        </view>
      </view>

      <!-- 绑定按钮 -->
      <view class="bind-button-container">
        <phone-verify id="phoneVerify" bind:verified="onBindCoach" bind:needLogin="onNeedLogin">
          <button 
            class="bind-button {{isBinding ? 'loading' : ''}}" 
            disabled="{{isBinding}}"
          >
            <text wx:if="{{!isBinding}}">绑定教练</text>
            <text wx:else>绑定中...</text>
          </button>
        </phone-verify>
      </view>
    </view>

  </view>

</layout> 