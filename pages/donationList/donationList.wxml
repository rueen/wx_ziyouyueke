<!--pages/donationList/donationList.wxml-->
<navBar title="赞助墙" />
<layout>
  <view class="donation-list-page">
    <!-- 头部统计 -->
    <view class="header-card" wx:if="{{!isEmpty}}">
      <view class="header-icon">❤️</view>
      <text class="header-title">感谢每一位支持者</text>
      <!-- <text class="header-count">累计 {{total}} 位用户赞助</text> -->
    </view>

    <!-- 列表 -->
    <view class="donation-wall" wx:if="{{list.length > 0}}">
      <view 
        class="wall-item"
        wx:for="{{list}}"
        wx:key="id">
        <view class="user-info">
          <image 
            class="user-avatar"
            src="{{item.avatar_url || 'https://ziyouyueke.oss-cn-hangzhou.aliyuncs.com/avatar/defaultAvatar.png'}}"
            mode="aspectFill" />
          <view class="user-details">
            <text class="user-nickname">{{item.nickname || '匿名用户'}}</text>
            <text class="donation-time">{{item.paid_at}}</text>
          </view>
        </view>
        <view class="donation-content">
          <view class="donation-amount">
            <text class="amount-symbol">¥</text>
            <text class="amount-value">{{item.amount / 100}}</text>
          </view>
        </view>
        <view class="donation-message" wx:if="{{item.message}}">
          <text class="message-text">{{item.message}}</text>
        </view>
      </view>
    </view>

    <!-- 加载状态 -->
    <view class="loading-more" wx:if="{{loading && !isEmpty}}">
      <text class="loading-text">加载中...</text>
    </view>

    <view class="no-more" wx:if="{{!hasMore && !isEmpty && list.length > 0}}">
      <text class="no-more-text">没有更多了</text>
    </view>

    <!-- 空状态 -->
    <empty-state 
      wx:if="{{isEmpty && !loading}}"
      message="暂无赞助记录"
      tip="成为第一个支持者吧" />
  </view>
</layout>

