<!--index.wxml-->
<navBar />
<layout>
  <view class="container">
    <!-- 用户信息卡片 -->
    <view class="user-card">
      <view class="user-header">
        <view class="user-avatar">
          <image src="{{userInfo.avatar}}" class="avatar-img"></image>
        </view>
        <view class="user-info">
          <text class="greeting">{{userRole === 'student' ? 'HELLO STUDENT' : 'HELLO COACH'}}</text>
          <view class="username-row">
            <text class="username">{{userInfo.name}}</text>
            <view class="role-tag">
              <text class="role-text">{{userRole === 'student' ? '学员' : '教练'}}</text>
            </view>
          </view>
        </view>
      </view>

      <!-- <view class="stats-row">
        <view class="stat-item" bindtap="onMyCoachOrStudentClick">
          <text class="stat-label">{{userRole === 'student' ? '我的教练' : '我的学员'}}</text>
          <text class="iconfont icon-arrow-r stat-arrow"></text>
        </view>
        
        <view class="stat-item" bindtap="onPendingCoursesClick">
          <text class="stat-label">上课记录</text>
          <text class="iconfont icon-arrow-r stat-arrow"></text>
        </view>
      </view> -->
      <!-- 公共菜单 -->
      <view class="menu-section">
        <view class="menu-item subscribe" bind:tap="openSubscribeMessage">
          <text class="iconfont icon-xiaoxidingyue"></text>
          <text class="menu-item-text">消息订阅</text>
        </view>
        <view class="menu-item coach" bind:tap="handleOpenAllCoachList">
          <text class="iconfont icon-users"></text>
          <text class="menu-item-text">教练大厅</text>
        </view>
        <view class="menu-item activity" bind:tap="handleOpenAllGroupCourses">
          <text class="iconfont icon-huodong"></text>
          <text class="menu-item-text">活动大厅</text>
        </view>
        <view class="menu-item tool-bmi" bind:tap="handleOpenToolsBmi">
          <view class="icon-bmi">
            <text class="icon-bmi-text">BMI</text>
          </view>
          <text class="menu-item-text">身体测量</text>
        </view>
      </view>
    </view>

    <!-- 我的课表 -->
    <view class="my-schedule">
      <!-- 教练时间安排 -->
      <timeSelector
        wx:if="{{userRole === 'coach'}}"
        id="timeSelector"
        coachId="{{userInfo.id}}"
        mode="view"
        show-booking-details="{{true}}"
      />
      <!-- 学员时间安排 -->
      <studentSchedule
        wx:if="{{userRole === 'student'}}"
        id="studentSchedule"
        studentId="{{userInfo.id}}"
      />
    </view>
    
    <!-- 立即约课按钮 -->
    <view class="book-button-container">
      <!-- <phone-verify id="phoneVerify" bind:verified="onBookCourse" bind:needLogin="onNeedLogin"> -->
        <button class="book-button" bind:tap="onBookCourse">{{userRole === 'student' ? '约教练' : '约学员'}}</button>
      <!-- </phone-verify> -->
    </view>
  </view>
</layout>
