<!--pages/addressList/addressList.wxml-->
<navBar title="常用地址" />
<layout class="container">
    <!-- 地址列表 -->
  <view class="address-list" wx:if="{{addresses.length > 0}}">
    <view class="address-item" wx:for="{{addresses}}" wx:key="id">
      <view class="swipe-container">
        <!-- 地址内容 -->
        <view class="address-card" 
              style="transform: translateX({{item.translateX || 0}}rpx)"
              bindtouchstart="onTouchStart"
              catchtouchmove="onTouchMove" 
              bindtouchend="onTouchEnd"
              data-index="{{index}}">
          <view class="address-content" bindtap="onEditAddress" data-address="{{item}}">
            <view class="address-header">
              <view class="address-name-row">
                <text class="address-name">{{item.name}}</text>
                <view class="default-tag" wx:if="{{item.isDefault}}">
                  <text class="default-text">默认</text>
                </view>
              </view>
            </view>
            <view class="address-detail">
              <text class="address-text">{{item.address}}</text>
            </view>
          </view>
        </view>
        
        <!-- 左滑操作按钮 -->
        <view class="swipe-actions">
          <button class="swipe-btn set-default-btn" 
                  wx:if="{{!item.isDefault}}"
                  catchtap="onSetDefault" 
                  data-id="{{item.id}}">
            <text class="iconfont icon-check"></text>
            <text class="btn-text">设为默认</text>
          </button>
          <button class="swipe-btn delete-btn" 
                  catchtap="onDeleteAddress" 
                  data-id="{{item.id}}" 
                  data-name="{{item.name}}">
            <text class="iconfont icon-delete"></text>
            <text class="btn-text">删除</text>
          </button>
        </view>
      </view>
    </view>
  </view>

  <!-- 空状态 -->
  <view class="empty-state" wx:if="{{addresses.length === 0 && !isLoading}}">
    <view class="empty-icon">
      <text class="iconfont icon-location"></text>
    </view>
    <text class="empty-text">暂无常用地址</text>
    <text class="empty-desc">点击下方按钮添加常用地址</text>
  </view>

  <!-- 加载状态 -->
  <view class="loading-state" wx:if="{{isLoading}}">
    <text class="loading-text">加载中...</text>
  </view>

  <!-- 新增地址按钮 -->
  <view class="add-button-container">
    <button class="add-button" bindtap="onAddAddress">
      <text class="iconfont icon-add"></text>
      <text class="add-text">新增地址</text>
    </button>
  </view>
</layout> 