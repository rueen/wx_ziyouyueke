<!--pages/studentList/studentList.wxml-->
<navBar title="我的学员" />
<layout class="container">
  <!-- 学员列表 -->
  <view class="student-list" wx:if="{{students.length > 0}}">
    <view class="student-item" wx:for="{{students}}" wx:key="id" bindtap="onStudentDetail" data-student="{{item}}">
      <view class="student-avatar">
        <image src="{{item.student.avatar_url}}" class="avatar-img"></image>
      </view>
      <view class="student-info">
        <view class="student-main-info">
          <text class="student-name">{{item.student.nickname}}</text>
        </view>
        <view class="remaining-lessons">
          <text class="lessons-label">剩余课时：</text>
          <text class="lessons-count active">{{item.remaining_lessons}}节</text>
        </view>
      </view>
      <text class="iconfont icon-arrow-r arrow-icon"></text>
    </view>
    
    <!-- 加载更多提示 -->
    <view class="load-more-container" wx:if="{{hasMore || isLoading}}">
      <view class="load-more-item" wx:if="{{isLoading}}">
        <text class="loading-text">加载中...</text>
      </view>
      <view class="load-more-item" wx:elif="{{hasMore}}">
        <text class="load-more-text">上拉加载更多</text>
      </view>
    </view>
    
    <!-- 没有更多数据提示 -->
    <view class="no-more-container" wx:if="{{!hasMore && !isLoading && students.length > 0}}">
      <text class="no-more-text">已加载全部学员</text>
    </view>
  </view>

  <!-- 加载状态 -->
  <view class="loading-state" wx:elif="{{isLoading && students.length === 0}}">
    <text class="loading-text">加载中...</text>
  </view>

  <!-- 空状态 -->
  <emptyState 
    wx:else
    type="no-data"
    title="暂无学员"
    description="您还没有关联任何学员，下拉可刷新">
  </emptyState>

  <!-- 添加学员按钮 -->
  <view class="add-button-container">
    <!-- <button class="add-button" bindtap="onAddStudent">添加学员</button> -->
    <button class="add-button" open-type="share">添加学员</button>
  </view>
</layout>
<!-- 添加学员弹窗 -->
<view class="bottom-modal {{showModal ? 'show' : ''}}" wx:if="{{showModal}}">
  <view class="modal-overlay" bindtap="onHideModal"></view>
  <view class="modal-content">
    <view class="modal-header">
      <text class="modal-title">输入学员手机号</text>
      <text class="modal-close" bindtap="onHideModal">✕</text>
    </view>
    <view class="modal-body">
      <input type="number" placeholder="请输入学员手机号" class="phoneInput" bindinput="onPhoneInput"/>
    </view>
    <view class="modal-footer">
      <button class="modal-btn cancel-modal-btn" open-type="share">
        <text class="iconfont icon-share"></text>
        <text>学员自行绑定</text>
      </button>
      <button class="modal-btn confirm-modal-btn active" 
              bindtap="onConfirmBind">确认添加</button>
    </view>
  </view>
</view>

 